<!DOCTYPE html>
<html>
<head>
    <title>Tree Planting Tracker</title>
    <style>
        #map {
            height: 400px;
            width: 100%;
            margin-bottom: 20px;
        }
        #treeForm {
            margin-bottom: 20px;
        }
    </style>
</head>
<body bgcolor="#09e7eb">
    <h1>Tree Planting Tracker</h1>

    <div id="map"></div>

    <form id="treeForm">
        <label for="species">Tree Species:</label>
        <select id="species" name="species" required>
            <option value="">Select a species</option>
            <option value="Oak">Oak</option>
            <option value="Maple">Maple</option>
            <option value="Pine">Pine</option>
            <option value="Birch">Birch</option>
            <option value="Elm">Elm</option>
            <option value="Ash">Ash</option>
            <option value="Beech">Beech</option>
            <option value="Cedar">Cedar</option>
            <option value="Fir">Fir</option>
            <option value="Spruce">Spruce</option>
            <option value="Willow">Willow</option>
            <option value="Poplar">Poplar</option>
            <option value="Sycamore">Sycamore</option>
            <option value="Chestnut">Chestnut</option>
            <option value="Hickory">Hickory</option>
            <option value="Walnut">Walnut</option>
            <option value="Cherry">Cherry</option>
            <option value="Magnolia">Magnolia</option>
            <option value="Dogwood">Dogwood</option>
            <option value="Redwood">Redwood</option>
            <option value="Sequoia">Sequoia</option>
            <option value="Cypress">Cypress</option>
            <option value="Linden">Linden</option>
            <option value="Ginkgo">Ginkgo</option>
            <option value="Eucalyptus">Eucalyptus</option>
            <option value="Acacia">Acacia</option>
            <option value="Baobab">Baobab</option>
            <option value="Banyan">Banyan</option>
            <option value="Bamboo">Bamboo</option>
            <option value="Mahogany">Mahogany</option>
            <option value="Teak">Teak</option>
            <option value="Ebony">Ebony</option>
            <option value="Rosewood">Rosewood</option>
            <option value="Sandalwood">Sandalwood</option>
            <option value="Mangrove">Mangrove</option>
            <option value="Palm">Palm</option>
            <option value="Coconut">Coconut</option>
            <option value="Olive">Olive</option>
            <option value="Fig">Fig</option>
            <option value="Mango">Mango</option>
            <option value="Avocado">Avocado</option>
            <option value="Peach">Peach</option>
            <option value="Apple">Apple</option>
            <option value="Pear">Pear</option>
            <option value="Plum">Plum</option>
            <option value="Lemon">Lemon</option>
            <option value="Orange">Orange</option>
            <option value="Lime">Lime</option>
            <option value="Grapefruit">Grapefruit</option>
            <option value="other">Other (specify)</option>
        </select>
        <input type="text" id="otherSpecies" name="otherSpecies" style="display: none;" placeholder="Enter species">

        <label for="status">Status:</label>
        <select type="text" id="status" name="status" required>
            <option value="">Select a status</option>
            <option value="Sapling">Sapling</option>
            <option value="Plant">Plant</option>
            <option value="Tree">Tree</option>
            <option value="Dead">Dead</option>
        </select>

        <label for="foundBy">Found by:</label>
        <input type="text" id="foundBy" name="foundBy" required>
        
        <label for="location">Location:</label>
        <input type="text" id="location" name="location" required readonly>

        <label for="plantingDate">Planting Date:</label>
        <input type="date" id="plantingDate" name="plantingDate" required>

        <button type="submit">Add Tree</button>
    </form>

    <table id="treeTable" border="2" name="Add">
        <thead>
            <tr>
                <th>Species</th>
                <th>Location</th>
                <th>Planting Date</th>
                <th>Status</th>
                <th>Found by</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            document.getElementById('plantingDate').value = formattedDate;
        }); 
    </script>

    <script>
        let map;
        let marker;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 12.92000768, lng: 77.6738415},
                zoom: 15
            });

            map.addListener('click', function(e) {
                const lat = e.latLng.lat();
                const lng = e.latLng.lng();
                document.getElementById('location').value = `${lat.toFixed(6)}, ${lng.toFixed(6)}`;

                if (marker) {
                    marker.setMap(null);
                }
                marker = new google.maps.Marker({
                    position: e.latLng,
                    map: map
                });
            });
        }

        const treeForm = document.getElementById('treeForm');
        const treeTable = document.getElementById('treeTable');
        const tableBody = treeTable.getElementsByTagName('tbody')[0];
        const speciesSelect = document.getElementById('species');
        const otherSpeciesInput = document.getElementById('otherSpecies');

        speciesSelect.addEventListener('change', function() {
            if (this.value === 'other') {
                otherSpeciesInput.style.display = 'inline-block';
                otherSpeciesInput.required = true;
            } else {
                otherSpeciesInput.style.display = 'none';
                otherSpeciesInput.required = false;
            }
        });

        treeForm.addEventListener('submit', (event) => {
            event.preventDefault();

            const species = speciesSelect.value === 'other' ? otherSpeciesInput.value : speciesSelect.value;
            const location = document.getElementById('location').value;
            const plantingDate = document.getElementById('plantingDate').value;
            const status = document.getElementById('status').value;
            const foundBy = document.getElementById('foundBy').value;

            const newRow = document.createElement('tr');
            const speciesCell = document.createElement('td');
            const locationCell = document.createElement('td');
            const dateCell = document.createElement('td');
            const statusCell = document.createElement('td');
            const foundByCell = document.createElement('td');

            speciesCell.textContent = species;
            locationCell.textContent = location;
            dateCell.textContent = plantingDate;
            statusCell.textContent = status;
            foundByCell.textContent = foundBy;

            newRow.appendChild(speciesCell);
            newRow.appendChild(locationCell);
            newRow.appendChild(dateCell);
            newRow.appendChild(statusCell);
            newRow.appendChild(foundByCell);

            tableBody.appendChild(newRow);

            treeForm.reset();
            otherSpeciesInput.style.display = 'none';
            if (marker) {
                marker.setMap(null);
            }
        });
    </script>
    <!-- Replace YOUR_API_KEY with your actual Google Maps API key -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDd6HrZnSTVOe8UAukCp_gASBZhFnOV0V8&callback=initMap" async defer></script>
</body>
</html>